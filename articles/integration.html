<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ohcleandat">
<title>Integrating Different Datasets • ohcleandat</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Integrating Different Datasets">
<meta property="og:description" content="ohcleandat">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ohcleandat</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/idcheck.html">ID Correction and Autobot</a>
    <a class="dropdown-item" href="../articles/integration.html">Integrating Different Datasets</a>
    <a class="dropdown-item" href="../articles/mechanics.html">Mechanics: Data Cleaning and Validation Pipeline</a>
    <a class="dropdown-item" href="../articles/outputs.html">Understanding The Pipeline Outputs</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Integrating Different Datasets</h1>
            
      
      
      <div class="d-none name"><code>integration.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ecohealthalliance.github.io/ohcleandat/">ohcleandat</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="integrating-data-sets">Integrating Data Sets<a class="anchor" aria-label="anchor" href="#integrating-data-sets"></a>
</h2>
<p>Once an individual data set has passed through the cleaning and
validation process, it may need to be combined (or joined) with other
data sets. This process is handled by the {targets} pipeline during the
<em>integration</em> steps. There are two phases, the first is
performing checks the second is the join operation.</p>
<p>The checks perform tests to ensure that the records in both data sets
are compatible and match the expectations of the relationship between
the two data sets. Secondly, the integration of the data sets is
performed by using an SQL join operation. This is typically either a
right-join, a left-join, an inner-join or a full-join.</p>
<p>The type of join operation selected depends on the relationship
between the data sets. The critical information here are the primary-key
(unique identifier) of the base table and the foreign-key of the table
to be joined which is the attribute that should match the primary-key.
In addition, the cardinality of the relationship is important to
understand the expected result when joining the data. Below is an
example of an entity relationship diagram that shows the relationship
between two example data sets. Crow’s feet notation is used to
illustrate that there is an optional 1:Many relationship with the left
table and the right table. There is also a mandatory 1:1 relationship
with the right table and the left table.</p>
<p><img src="img/erd.png"></p>
<p>Also below is the relevant target that performs the joining operation
and integrates these data sets together.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="fu">tar_target</span><span class="op">(</span><span class="va">integrated_mosq_field</span>,</span>
<span>             <span class="fu">left_join</span><span class="op">(</span></span>
<span>               x <span class="op">=</span> <span class="va">fs_mosquito_field_semiclean</span>,</span>
<span>               y <span class="op">=</span> <span class="va">longitudinal_identification_semiclean</span>,</span>
<span>               by <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Batch_ID"</span> <span class="op">=</span> <span class="st">"batch_id"</span><span class="op">)</span></span>
<span>             <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>It is critical that data validation steps are correctly performed to
ensure the integration of multiple data sets is successful. In the case
where there are missing, malformed or duplicate primary key, the
expectations around the relationship type will not hold up.</p>
<p>An overview of this integration process is below.</p>
<p><img src="img/integration.png"></p>
</div>
<div class="section level2">
<h2 id="types-of-data">Types of Data<a class="anchor" aria-label="anchor" href="#types-of-data"></a>
</h2>
<p>Throughout the data cleaning pipeline, we take in raw data and
convert it to some form of clean data. There are several intermediate
steps in this process. A standard terminology has been adopted to
describe the steps in this process.</p>
<ul>
<li>
<strong>raw data</strong>: is data that is read in directly from the
source systems.</li>
<li>
<strong>combined data</strong>: If the raw data is situated in
multiple files or data frames, a compatible and united data set of these
data are termed ‘combined.’<br>
</li>
<li>
<strong>semi-clean</strong>: Data are semi-clean once they have been
corrected using the values provided in the validation log.</li>
<li>
<strong>integrated</strong>: Data are integrated when they are
joined to other data sets.</li>
<li>
<strong>clean</strong>: Data are termed clean when they are
integrated, and records that are still pending validation in the logs
are removed, thereby leaving only a clean subset of validated data.</li>
</ul>
</div>
<div class="section level2">
<h2 id="tips-for-data-management">Tips for data management<a class="anchor" aria-label="anchor" href="#tips-for-data-management"></a>
</h2>
<p>Over the course of a long data collection exercise, standards and
formats can diverge. This makes the data cleaning steps difficult and
will slow down the ability to integrate data as above. Some general
strategies can help to mitigate these risks:</p>
<ul>
<li>Ensure that data formatting to a standard where each row uniquely
identifies a record and have a unique identifier without duplicates or
missing values.</li>
<li>Ensure all data are stored as a data.frame or tibble.<br>
</li>
<li>In R, ensure that each column has a correct and unique column type.
(i.e. character, numeric and <em>not</em> list)<br>
</li>
<li>Each column name should be unique and formatted consistently to
avoid spaces and special characters in column names. Hint: Use
<code><a href="https://sfirke.github.io/janitor/reference/clean_names.html" class="external-link">janitor::clean_names()</a></code>.</li>
<li>Design and enforce a Primary Key or Unique Identifier for each data
set that will be meaningful and immutable.</li>
<li>Think about storing data in a ‘tidy’ format where possible. See
here: <a href="https://www.jstatsoft.org/article/view/v059i10" class="external-link uri">https://www.jstatsoft.org/article/view/v059i10</a><br>
</li>
<li>Store raw data in a machine readable format (i.e. CSV)</li>
<li>Set some metadata standards at the start of the project around
columns and data types. It is understandable that these might change
over time, but having these standards will help plan how to best
accommodate changes without breaking existing work.</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Collin Schwantes, Johana Teigen, Ernest Guevarra, Dean Marchiori, Melinda Rostal, EcoHealth Alliance.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
