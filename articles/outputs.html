<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Understanding The Pipeline Outputs • ohcleandat</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Understanding The Pipeline Outputs">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ohcleandat</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.12</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/idcheck.html">ID Correction and Autobot</a></li>
    <li><a class="dropdown-item" href="../articles/integration.html">Integrating Different Datasets</a></li>
    <li><a class="dropdown-item" href="../articles/mechanics.html">Mechanics: Data Cleaning and Validation Pipeline</a></li>
    <li><a class="dropdown-item" href="../articles/metadata.html">Metadata: Creating Standard Metadata with `{ohcleandat}` and `{deposits}`</a></li>
    <li><a class="dropdown-item" href="../articles/outputs.html">Understanding The Pipeline Outputs</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Understanding The Pipeline Outputs</h1>
            
      

      <div class="d-none name"><code>outputs.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ecohealthalliance.github.io/ohcleandat/">ohcleandat</a></span><span class="op">)</span></span></code></pre></div>
<p>The outputs of the data cleaning and validation pipeline are
principally two objects.</p>
<ol style="list-style-type: decimal">
<li><p>a HTML report that describes the quality checks that have been
performed and highlights records that did not pass the validation
checks. This provides an alert to users and is automatically emailed to
a predefined email list.</p></li>
<li><p>A validation log. The validation log is a CSV output that is
uploaded to a Dropbox location. This validation log provides a list of
records with a field identifier and value that did not pass the
validation checks. This is to be provided to subject matter experts to
populate new values and confirm the updates to the data. The data
cleaning and validation pipeline will scan for and apply changes that
are indicated in the validation logs and correct the raw data.</p></li>
</ol>
<div class="section level2">
<h2 id="html-report">HTML Report<a class="anchor" aria-label="anchor" href="#html-report"></a>
</h2>
<p>A sample HTML report is shows below. These are archived in AWS S3 and
a secure link is produced. These details are emailed to a user on a
pre-defined list of recipients.</p>
<p><img src="img%2Fhtml.png"></p>
</div>
<div class="section level2">
<h2 id="validation-logs">Validation Logs<a class="anchor" aria-label="anchor" href="#validation-logs"></a>
</h2>
<p>The following is a list of fields in the validation logs and their
meaning:</p>
<p><strong>rowid</strong>: Provides the correct order of entries in the
validation log. This is important as users may choose to filter and
change the order of the log in order to understand and appropriately
correct records in the log. However, since changes need to be processed
in sequential order, the rowid is used so that the correction functions
in the data pipeline can appropriately process and correct changes to
the data in the right order.</p>
<p><strong>log_response_id</strong>: In some cases, a unique identifier
for a record is a long and complicated ID string, which is not easily
parsed by a human. To provide an easier way to filter and understand how
different entries in the log relate to the same record, a simpler
log_response_id provides just the group ID of a particular unique record
for an identifier to understand how records relate to each other.</p>
<p><strong>entry</strong>: This is the unique identifier for a
particular record in the data. Otherwise known as the primary key. This
is the key identifier that is used to locate the record in the data and
apply corrections.</p>
<p><strong>field</strong>: This is the column name in the data set
relating to the record that is being described in the validation
log.</p>
<p><strong>question</strong>: The question column exists for survey data
only and provides the survey question text.</p>
<p><strong>issue</strong>: A human readable description of which
validation rule has been broken and what needs to be corrected.</p>
<p><strong>old_value</strong>: Indicates the current value in the data
that did not pass the validation rule.</p>
<p><strong>is_valid</strong>: A very important column in the validation
log. This can take two values. TRUE or FALSE (also acceptable are T and
F). When a particular record in the validation log needs to be corrected
a user must mark this with FALSE, indicating the current value in the
data set is not valid and that it requires correction. If a user is
reviewing the validation log and despite the fact that there has been an
entry in the log, the old value in the data is in fact correct, the user
can place a TRUE in this field to indicate that the record is valid and
does not require correction.</p>
<p><strong>new_val</strong>: A column for human input to indicate the
corrected value.</p>
<p><strong>overwrite_old_value</strong>: For survey or questionnaire
data only, this column has two options, TRUE or FALSE. This will
indicate whether the new value should completely overwrite the old value
that is currently in the data. If this is set to FALSE, the new value
will be appended to the end of the old_value string.</p>
<p><strong>user_initials</strong>: This enables the reviewer to provide
their initials so we understand which reviewer has made the corrections
in the log.</p>
<p><strong>odk_url</strong>: For survey data this field is present to
provide the reviewer with a way to go back and view the original ODK
submission in order to gain further context around the particular
question and its value.</p>
<p><strong>comments</strong>: Can contain system generated or user
provided comments to assist with understanding why changes were
made.</p>
<p>It’s important that the formatting and file format of the validation
log is not changed. As this data set needs to be machine readable and is
used directly to apply changes to the data.</p>
<div class="section level3">
<h3 id="special-cases">Special Cases<a class="anchor" aria-label="anchor" href="#special-cases"></a>
</h3>
<p>There are some special cases where the validation log can be used to
do more than just simply correcting existing values that are raised.</p>
<p>The first example of this is <strong>creating a new value</strong> in
the data set. If a new value is to be created the user must go to the
end of the validation log and create a new entry. A new
<code>rowid</code> should be provided and the appropriate entry ID
should be populated. The fields <code>new_value</code> and
<code>is_valid</code> columns also need to be created.</p>
<p>In the case where <strong>a record is to be deleted</strong>, a user
can provide a keyword in the <code>new_val</code> column. Currently,
this keyword is ‘Delete’. This is set to be detected in the pipeline and
rather than changing the value to the word ‘Delete’ the correction
function will interpret this as an instruction to delete this particular
record from the data. If this keyword needs to be changed, there is the
ability to pass this argument to the correction function, in the targets
pipeline.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Collin Schwantes, Johana Teigen, Ernest Guevarra, Dean Marchiori, Melinda Rostal, EcoHealth Alliance.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
